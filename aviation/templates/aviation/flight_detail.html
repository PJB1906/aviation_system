{% extends 'aviation/base.html' %}

{% block title %}Flight {{ flight.flightnumber }} - Aviation System{% endblock %}

{% block content %}
<a href="{% url 'flights_list' %}" style="color: #60a5fa; text-decoration: none; margin-bottom: 1rem; display: inline-block;">‚Üê Back to Flights</a>

<h1 style="color: #fff; margin-bottom: 1.5rem;">Flight {{ flight.flightnumber }}</h1>

<div style="background: rgba(30, 41, 59, 0.5); padding: 2rem; border-radius: 12px; margin-bottom: 2rem; border: 1px solid #334155;">
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
        <div style="color: #e2e8f0;">
            <strong style="color: #94a3b8; display: block; margin-bottom: 0.25rem; font-size: 0.875rem;">Airline:</strong>
            <span style="color: #fff; font-size: 1.125rem;">{{ flight.airlineid.airlinename }}</span>
        </div>
        <div style="color: #e2e8f0;">
            <strong style="color: #94a3b8; display: block; margin-bottom: 0.25rem; font-size: 0.875rem;">Status:</strong>
            <span style="padding: 0.5rem 1rem; background: {% if flight.flightstatus == 'Completed' %}#10b981{% elif flight.flightstatus == 'Delayed' %}#f59e0b{% elif flight.flightstatus == 'Cancelled' %}#ef4444{% else %}#3b82f6{% endif %}; color: #fff; border-radius: 20px; font-size: 0.875rem; font-weight: 600; display: inline-block;">{{ flight.flightstatus }}</span>
        </div>
        <div style="color: #e2e8f0;">
            <strong style="color: #94a3b8; display: block; margin-bottom: 0.25rem; font-size: 0.875rem;">Departure:</strong>
            <span style="color: #fff; font-size: 1.125rem;">{{ flight.departureairportcode.airportname }}</span>
        </div>
        <div style="color: #e2e8f0;">
            <strong style="color: #94a3b8; display: block; margin-bottom: 0.25rem; font-size: 0.875rem;">Arrival:</strong>
            <span style="color: #fff; font-size: 1.125rem;">{{ flight.arrivalairportcode.airportname }}</span>
        </div>
        <div style="color: #e2e8f0;">
            <strong style="color: #94a3b8; display: block; margin-bottom: 0.25rem; font-size: 0.875rem;">Scheduled Departure:</strong>
            <span style="color: #fff;">{{ flight.scheduleddeparture }}</span>
        </div>
        <div style="color: #e2e8f0;">
            <strong style="color: #94a3b8; display: block; margin-bottom: 0.25rem; font-size: 0.875rem;">Scheduled Arrival:</strong>
            <span style="color: #fff;">{{ flight.scheduledarrival }}</span>
        </div>
        {% if flight.actualdeparture %}
        <div style="color: #e2e8f0;">
            <strong style="color: #94a3b8; display: block; margin-bottom: 0.25rem; font-size: 0.875rem;">Actual Departure:</strong>
            <span style="color: #fff;">{{ flight.actualdeparture }}</span>
        </div>
        {% endif %}
        {% if flight.actualarrival %}
        <div style="color: #e2e8f0;">
            <strong style="color: #94a3b8; display: block; margin-bottom: 0.25rem; font-size: 0.875rem;">Actual Arrival:</strong>
            <span style="color: #fff;">{{ flight.actualarrival }}</span>
        </div>
        {% endif %}
    </div>
</div>

<h2 style="color: #fff; margin-bottom: 1rem;">Passengers on this Flight</h2>
<table>
    <thead>
        <tr>
            <th>Passenger Name</th>
            <th>Seat Number</th>
            <th>Ticket Status</th>
            <th>Checked In</th>
        </tr>
    </thead>
    <tbody>
        {% for ticket in tickets %}
        <tr>
            <td>{{ ticket.passengerid.firstname }} {{ ticket.passengerid.lastname }}</td>
            <td>{{ ticket.seatnumber }}</td>
            <td>{{ ticket.ticketstatus }}</td>
            <td>{% if ticket.checkedina %}{{ ticket.checkedina }}{% else %}Not checked in{% endif %}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="4" style="text-align: center; color: #999;">No passengers booked yet</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
