<!-- ============================================================================ -->
<!-- FILE 18: aviation/templates/aviation/flight_detail.html -->
<!-- ============================================================================ -->
{% extends 'aviation/base.html' %}

{% block title %}Flight {{ flight.flightnumber }} - Aviation System{% endblock %}

{% block content %}
<a href="{% url 'flights_list' %}" style="color: #667eea; text-decoration: none; margin-bottom: 1rem; display: inline-block;">‚Üê Back to Flights</a>

<h1>Flight {{ flight.flightnumber }}</h1>

<div style="background: #f8f9fa; padding: 1.5rem; border-radius: 10px; margin-bottom: 2rem;">
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
        <div>
            <strong>Airline:</strong> {{ flight.airlineid.airlinename }}
        </div>
        <div>
            <strong>Status:</strong> <span style="padding: 0.25rem 0.75rem; background: {% if flight.flightstatus == 'Completed' %}#d4edda{% elif flight.flightstatus == 'Delayed' %}#fff3cd{% elif flight.flightstatus == 'Cancelled' %}#f8d7da{% else %}#cfe2ff{% endif %}; border-radius: 15px; font-size: 0.85rem;">{{ flight.flightstatus }}</span>
        </div>
        <div>
            <strong>Departure:</strong> {{ flight.departureairportcode.airportname }}
        </div>
        <div>
            <strong>Arrival:</strong> {{ flight.arrivalairportcode.airportname }}
        </div>
        <div>
            <strong>Scheduled Departure:</strong> {{ flight.scheduleddeparture }}
        </div>
        <div>
            <strong>Scheduled Arrival:</strong> {{ flight.scheduledarrival }}
        </div>
        {% if flight.actualdeparture %}
        <div>
            <strong>Actual Departure:</strong> {{ flight.actualdeparture }}
        </div>
        {% endif %}
        {% if flight.actualarrival %}
        <div>
            <strong>Actual Arrival:</strong> {{ flight.actualarrival }}
        </div>
        {% endif %}
    </div>
</div>

<h2>Passengers on this Flight</h2>
<table>
    <thead>
        <tr>
            <th>Passenger Name</th>
            <th>Seat Number</th>
            <th>Ticket Status</th>
            <th>Checked In</th>
        </tr>
    </thead>
    <tbody>
        {% for ticket in tickets %}
        <tr>
            <td>{{ ticket.passengerid.firstname }} {{ ticket.passengerid.lastname }}</td>
            <td>{{ ticket.seatnumber }}</td>
            <td>{{ ticket.ticketstatus }}</td>
            <td>{% if ticket.checkedina %}{{ ticket.checkedina }}{% else %}Not checked in{% endif %}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="4" style="text-align: center; color: #999;">No passengers booked yet</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
